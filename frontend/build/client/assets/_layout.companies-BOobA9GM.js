import{o as e,a,w as O}from"./chunk-QMGIS6GS-CRLmNMPd.js";import{w as m,J as n,G as o,K as H,N as R,O as D,P as u,E as A,a4 as T,a5 as B}from"./sdk.gen-1y8RMMdH.js";import{D as L,h as P,B as _,C as F,g as U,T as c}from"./Close-XszXWwct.js";/* empty css                             */import"./index-BXUbddt1.js";const G=m(e.jsx("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"})),E=m(e.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),V=m(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),J=m(e.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"})),K=m(e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2s.07-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"})),$=m(e.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"})),q=m(e.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),Q=m(e.jsx("path",{d:"M20 10V8h-4V4h-2v4h-4V4H8v4H4v2h4v4H4v2h4v4h2v-4h4v4h2v-4h4v-2h-4v-4zm-6 4h-4v-4h4z"})),X=({isOpen:g,onClose:b,company:t,onCompanyUpdate:w})=>{const[r,j]=a.useState({id:"",name:"",short_name:"",business_type:"",phone:"",email:"",website:"",address:"",description:"",tags:""}),[x,z]=a.useState(null),[l,f]=a.useState(!1),[N,h]=a.useState(null),[i,y]=a.useState(!1),[I,p]=a.useState(!1);a.useEffect(()=>{if(t){z(t);const d={id:t.id||"",name:t.name||"",short_name:t.short_name||"",business_type:t.business_type||"",phone:t.phone||"",email:t.email||"",website:t.website||"",address:t.address||"",tags:Array.isArray(t.tags)?t.tags.join(", "):t.tags||""};j(d),h(null),y(!1),p(!1)}},[t]);const s=d=>{const{name:k,value:M}=d.target;j(S=>({...S,[k]:M})),p(!0)},v=()=>{i&&I?confirm("å¤‰æ›´ã‚’ç ´æ£„ã—ã¾ã™ã‹ï¼Ÿ")&&(t&&j({id:t.id||"",name:t.name||"",short_name:t.short_name||"",business_type:t.business_type||"",phone:t.phone||"",email:t.email||"",website:t.website||"",address:t.address||"",tags:Array.isArray(t.tags)?t.tags.join(", "):t.tags||""}),y(!1),p(!1)):(y(!i),p(!1))},C=async()=>{if(!t){h("ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“");return}f(!0),h(null);try{const d=r.tags?r.tags.split(",").map(S=>S.trim()).filter(S=>S.length>0):[],k={...t,name:r.name,short_name:r.short_name,business_type:r.business_type,phone:r.phone,email:r.email,website:r.website,address:r.address,tags:d},M=await T({body:k});if(M.data)z(M.data),y(!1),p(!1),w&&w(M.data),h(null);else throw new Error("æ›´æ–°ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒç„¡åŠ¹ã§ã™")}catch(d){console.error("Error updating company:",d),h(d instanceof Error?d.message:"ä¼šç¤¾æƒ…å ±ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{f(!1)}},W=x?.tags?Array.isArray(x.tags)?x.tags:[x.tags]:[];return e.jsxs(L,{open:g,onClose:b,maxWidth:"md",fullWidth:!0,slotProps:{paper:{sx:{borderRadius:2,minHeight:"500px"}}},children:[e.jsxs(P,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(o,{variant:"h6",component:"h2",children:"ä¼šç¤¾è©³ç´°æƒ…å ±"}),i&&e.jsx(H,{label:"ç·¨é›†ä¸­",color:"warning",size:"small",icon:e.jsx(V,{})})]}),e.jsxs(n,{sx:{display:"flex",gap:1},children:[e.jsx(_,{variant:i?"outlined":"contained",size:"small",onClick:v,startIcon:i?e.jsx(E,{}):e.jsx(V,{}),color:i?"secondary":"primary",children:i?"ã‚­ãƒ£ãƒ³ã‚»ãƒ«":"ç·¨é›†"}),e.jsx(R,{onClick:b,size:"small",sx:{color:"grey.500"},children:e.jsx(F,{})})]})]}),e.jsxs(U,{dividers:!0,children:[N&&e.jsx(D,{severity:"error",sx:{mb:2},children:N}),e.jsxs(n,{sx:{mt:1},children:[e.jsxs(n,{sx:{display:"flex",gap:2,mb:3,flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(n,{sx:{flex:1},children:e.jsxs(u,{elevation:0,sx:{p:2,backgroundColor:"primary.50",border:"2px solid",borderColor:"primary.200",borderRadius:2},children:[e.jsxs(o,{variant:"subtitle2",sx:{color:"primary.main",fontWeight:600,mb:1,display:"flex",alignItems:"center",gap:1},children:[e.jsx(G,{fontSize:"small"}),"ä¼šç¤¾å"]}),e.jsx(c,{fullWidth:!0,size:"small",name:"name",value:r.name,onChange:s,disabled:l||!i,sx:{"& .MuiOutlinedInput-root":{backgroundColor:i?"white":"grey.50"}}})]})}),e.jsx(n,{sx:{flex:1},children:e.jsxs(u,{elevation:0,sx:{p:2,backgroundColor:"grey.50",border:"1px solid",borderColor:"grey.200",borderRadius:2},children:[e.jsx(o,{variant:"subtitle2",sx:{color:"text.primary",fontWeight:500,mb:1},children:"ç•¥ç§°"}),e.jsx(c,{fullWidth:!0,size:"small",name:"short_name",value:r.short_name,onChange:s,disabled:l||!i,sx:{"& .MuiOutlinedInput-root":{backgroundColor:i?"white":"grey.50"}}})]})})]}),e.jsxs(n,{sx:{display:"flex",gap:2,mb:3,flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(n,{sx:{flex:1},children:e.jsxs(u,{elevation:0,sx:{p:2,backgroundColor:"grey.50",border:"1px solid",borderColor:"grey.200",borderRadius:2},children:[e.jsx(o,{variant:"subtitle2",sx:{color:"text.primary",fontWeight:500,mb:1},children:"æ¥­ç¨®"}),e.jsx(c,{fullWidth:!0,size:"small",name:"business_type",value:r.business_type,onChange:s,disabled:l||!i,sx:{"& .MuiOutlinedInput-root":{backgroundColor:i?"white":"grey.50"}}})]})}),e.jsx(n,{sx:{flex:1},children:e.jsxs(u,{elevation:0,sx:{p:2,backgroundColor:"grey.50",border:"1px solid",borderColor:"grey.200",borderRadius:2},children:[e.jsx(o,{variant:"subtitle2",sx:{color:"text.primary",fontWeight:500,mb:1},children:"ID"}),e.jsx(o,{variant:"body2",sx:{fontFamily:"monospace",padding:"8px 12px",backgroundColor:"white",border:"1px solid",borderColor:"grey.300",borderRadius:1,color:"grey.700"},children:r.id||"IDæœªè¨­å®š"})]})})]}),e.jsxs(n,{sx:{display:"flex",gap:2,mb:3,flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(n,{sx:{flex:1},children:e.jsxs(u,{elevation:0,sx:{p:2,backgroundColor:"grey.50",border:"1px solid",borderColor:"grey.200",borderRadius:2},children:[e.jsxs(o,{variant:"subtitle2",sx:{color:"text.primary",fontWeight:500,mb:1,display:"flex",alignItems:"center",gap:1},children:[e.jsx($,{fontSize:"small"}),"é›»è©±ç•ªå·"]}),e.jsx(c,{fullWidth:!0,size:"small",name:"phone",value:r.phone,onChange:s,disabled:l||!i,sx:{"& .MuiOutlinedInput-root":{backgroundColor:i?"white":"grey.50"}}})]})}),e.jsx(n,{sx:{flex:1},children:e.jsxs(u,{elevation:0,sx:{p:2,backgroundColor:"grey.50",border:"1px solid",borderColor:"grey.200",borderRadius:2},children:[e.jsxs(o,{variant:"subtitle2",sx:{color:"text.primary",fontWeight:500,mb:1,display:"flex",alignItems:"center",gap:1},children:[e.jsx(J,{fontSize:"small"}),"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"]}),e.jsx(c,{fullWidth:!0,size:"small",name:"email",type:"email",value:r.email,onChange:s,disabled:l||!i,sx:{"& .MuiOutlinedInput-root":{backgroundColor:i?"white":"grey.50"}}})]})})]}),e.jsx(n,{sx:{display:"flex",gap:2,mb:3,flexDirection:{xs:"column",sm:"row"}},children:e.jsx(n,{sx:{flex:1},children:e.jsxs(u,{elevation:0,sx:{p:2,backgroundColor:"grey.50",border:"1px solid",borderColor:"grey.200",borderRadius:2},children:[e.jsxs(o,{variant:"subtitle2",sx:{color:"text.primary",fontWeight:500,mb:1,display:"flex",alignItems:"center",gap:1},children:[e.jsx(K,{fontSize:"small"}),"ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ"]}),e.jsx(c,{fullWidth:!0,size:"small",name:"website",type:"url",value:r.website,onChange:s,disabled:l||!i,sx:{"& .MuiOutlinedInput-root":{backgroundColor:i?"white":"grey.50"}}})]})})}),e.jsx(n,{sx:{mb:3},children:e.jsxs(u,{elevation:0,sx:{p:2,backgroundColor:"grey.50",border:"1px solid",borderColor:"grey.200",borderRadius:2},children:[e.jsx(o,{variant:"subtitle2",sx:{color:"text.primary",fontWeight:500,mb:1},children:"ä½æ‰€"}),e.jsx(c,{fullWidth:!0,size:"small",name:"address",value:r.address,onChange:s,disabled:l,sx:{"& .MuiOutlinedInput-root":{backgroundColor:"white"}}})]})}),e.jsxs(n,{sx:{mb:3},children:[e.jsxs(n,{sx:{mb:2},children:[e.jsx(o,{variant:"subtitle2",sx:{color:"text.primary",fontWeight:500,mb:1},children:"èª¬æ˜"}),e.jsx(c,{fullWidth:!0,multiline:!0,rows:3,name:"description",value:r.description,onChange:s,disabled:l||!i,placeholder:"ä¼šç¤¾ã®è©³ç´°èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",sx:{"& .MuiOutlinedInput-root":{backgroundColor:i?"white":"grey.50"}}})]}),e.jsxs(n,{children:[e.jsxs(o,{variant:"subtitle2",sx:{color:"text.primary",fontWeight:500,mb:1,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Q,{fontSize:"small"}),"ã‚¿ã‚°"]}),e.jsx(c,{fullWidth:!0,name:"tags",value:r.tags,onChange:s,placeholder:"ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›",disabled:l||!i,sx:{"& .MuiOutlinedInput-root":{backgroundColor:i?"white":"grey.50"}}}),W.length>0&&e.jsxs(n,{sx:{mt:2},children:[e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"ç¾åœ¨ã®ã‚¿ã‚°:"}),e.jsx(n,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:W.map((d,k)=>e.jsx(H,{label:d,size:"small",color:"primary",variant:"outlined"},k))})]})]})]}),i&&e.jsxs(n,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:3},children:[e.jsx(_,{variant:"outlined",onClick:v,disabled:l,startIcon:e.jsx(E,{}),children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),e.jsx(_,{variant:"contained",onClick:C,disabled:l||!I,startIcon:l?e.jsx(A,{size:16}):e.jsx(q,{}),color:"primary",children:l?"ä¿å­˜ä¸­...":"ä¿å­˜"})]}),!i&&I===!1&&x&&e.jsx(D,{severity:"success",sx:{mt:2},children:"ä¼šç¤¾æƒ…å ±ãŒæ­£å¸¸ã«æ›´æ–°ã•ã‚Œã¾ã—ãŸã€‚"})]})]})]})},Y=()=>{const[g,b]=a.useState([]),[t,w]=a.useState(!0),[r,j]=a.useState(null),[x,z]=a.useState(!1),[l,f]=a.useState(null),[N,h]=a.useState(!1),i=async()=>{try{w(!0),j(null);const s=await B();s.data?b(s.data):b([])}catch(s){console.error("Error loading company entries:",s),j(`ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ: ${s instanceof Error?s.message:String(s)}`)}finally{w(!1)}};a.useEffect(()=>{i()},[]);const y=s=>{f(s),h(!0)},I=()=>{h(!1),f(null)},p=s=>{f(s),b(v=>v.map(C=>C.name===s.name?s:C))};return t?e.jsx("div",{className:"business-entity-loading",children:e.jsx("div",{children:"ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­..."})}):r?e.jsxs("div",{className:"business-entity-error",children:[e.jsx("div",{className:"business-entity-error-message",children:r}),e.jsx("button",{onClick:i,className:"business-entity-retry-button",children:"å†è©¦è¡Œ"})]}):e.jsxs("div",{className:"business-entity-container",children:[e.jsx("div",{className:"business-entity-controls",children:e.jsxs("div",{className:"business-entity-count",children:["å…¨",g.length,"ä»¶"]})}),x&&e.jsxs("div",{className:"business-entity-help-box",children:[e.jsx("button",{onClick:()=>z(!1),className:"business-entity-help-close",title:"é–‰ã˜ã‚‹",children:"Ã—"}),e.jsx("h3",{style:{marginTop:0},children:"ä½¿ç”¨æ–¹æ³•"}),e.jsxs("p",{children:["ğŸ“ ",e.jsx("strong",{children:"ä¼šç¤¾æƒ…å ±è¡¨ç¤º"})]}),e.jsxs("p",{children:["ğŸ¢ ",e.jsx("strong",{children:"æ¥­ç¨®åˆ¥åˆ†é¡"})]}),e.jsxs("p",{children:["ğŸ“ ",e.jsx("strong",{children:"é€£çµ¡å…ˆæƒ…å ±"})]}),e.jsx("p",{children:"âœ… ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ã®å–å¾—"}),e.jsx("p",{children:"âœ… ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼åã‹ã‚‰ã®è‡ªå‹•è§£æ"})]}),e.jsxs("div",{className:"business-entity-list-container",children:[e.jsxs("div",{className:"business-entity-list-header",children:[e.jsx("div",{className:"business-entity-header-company",children:"ä¼šç¤¾å"}),e.jsx("div",{className:"business-entity-header-company",children:"æ¥­ç¨®"}),e.jsx("div",{className:"business-entity-header-spacer"}),e.jsx("button",{onClick:()=>z(!x),className:"business-entity-help-button",title:"ä½¿ç”¨æ–¹æ³•ã‚’è¡¨ç¤º",children:"?"})]}),e.jsx("div",{className:"business-entity-scroll-area",children:g.length===0?e.jsx("div",{className:"business-entity-empty",children:"ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"}):e.jsx("div",{children:g.map((s,v)=>e.jsxs("div",{className:"business-entity-item-row",onClick:()=>y(s),title:"ã‚¯ãƒªãƒƒã‚¯ã—ã¦è©³ç´°è¡¨ç¤º",style:{cursor:"pointer"},children:[e.jsxs("div",{className:"business-entity-item-info",children:[e.jsx("div",{className:"business-entity-item-info-company",children:s.short_name||s.name||"ä¼šç¤¾åæœªè¨­å®š"}),e.jsx("div",{className:"business-entity-item-info-company",children:s.business_type||"æ¥­ç¨®æœªè¨­å®š"}),e.jsx("div",{className:"business-entity-item-info-spacer"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.tags&&s.tags.length>0&&e.jsxs("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[s.tags.slice(0,3).map((C,W)=>e.jsx("span",{style:{fontSize:"0.7em",background:"#e3f2fd",color:"#1976d2",padding:"2px 6px",borderRadius:"10px",whiteSpace:"nowrap"},children:C},W)),s.tags.length>3&&e.jsxs("span",{style:{fontSize:"0.7em",color:"#666"},children:["+",s.tags.length-3]})]}),e.jsx("div",{className:"business-entity-item-status business-entity-item-status-completed",children:s.website?"ğŸŒ":"ğŸ“"})]})]},s.id||v))})})]}),e.jsx(X,{isOpen:N,onClose:I,company:l,onCompanyUpdate:p})]})},re=O(function(){return e.jsx(Y,{})});export{re as default};
