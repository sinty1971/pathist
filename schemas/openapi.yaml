components:
  schemas:
    Company:
      additionalProperties: false
      properties:
        $schema:
          description: A URL to the JSON Schema for this object.
          examples:
            - http://localhost:8080/api/schemas/Company.json
          format: uri
          readOnly: true
          type: string
        address:
          examples:
            - 愛知県名古屋市熱田区三本松町1-1
          type: string
        category:
          examples:
            - "1"
          type: string
        email:
          examples:
            - info@toyotachikuro.jp
          type: string
        folderName:
          examples:
            - ~/penguin/豊田築炉/1 会社/0 豊田築炉
          type: string
        id:
          examples:
            - TC001
          type: string
        legalName:
          examples:
            - 有限会社 豊田築炉
          type: string
        phone:
          examples:
            - 052-681-8111
          type: string
        postalCode:
          examples:
            - 456-0001
          type: string
        requiredFiles:
          items:
            $ref: "#/components/schemas/FileInfo"
          type:
            - array
            - "null"
        shortName:
          examples:
            - 豊田築炉
          type: string
        tags:
          examples:
            - - 元請け
              - 製造業
          items:
            type: string
          type:
            - array
            - "null"
        website:
          examples:
            - https://www.toyotachikuro.jp
          type: string
      required:
        - id
        - folderName
        - category
        - requiredFiles
      type: object
    CompanyCategoryInfo:
      additionalProperties: false
      properties:
        code:
          examples:
            - "1"
          type: string
        label:
          examples:
            - 下請会社
          type: string
      required:
        - code
        - label
      type: object
    ErrorDetail:
      additionalProperties: false
      properties:
        location:
          description: Where the error occurred, e.g. 'body.items[3].tags' or 'path.thing-id'
          type: string
        message:
          description: Error message text
          type: string
        value:
          description: The value at the given location
      type: object
    ErrorModel:
      additionalProperties: false
      properties:
        $schema:
          description: A URL to the JSON Schema for this object.
          examples:
            - http://localhost:8080/api/schemas/ErrorModel.json
          format: uri
          readOnly: true
          type: string
        detail:
          description: A human-readable explanation specific to this occurrence of the problem.
          examples:
            - Property foo is required but is missing.
          type: string
        errors:
          description: Optional list of individual error details
          items:
            $ref: "#/components/schemas/ErrorDetail"
          type:
            - array
            - "null"
        instance:
          description: A URI reference that identifies the specific occurrence of the problem.
          examples:
            - https://example.com/error-log/abc123
          format: uri
          type: string
        status:
          description: HTTP status code
          examples:
            - 400
          format: int64
          type: integer
        title:
          description: A short, human-readable summary of the problem type. This value should not change between occurrences of the error.
          examples:
            - Bad Request
          type: string
        type:
          default: about:blank
          description: A URI reference to human-readable documentation for the error.
          examples:
            - https://example.com/errors/example
          format: uri
          type: string
      type: object
    FileInfo:
      additionalProperties: false
      properties:
        actualPath:
          examples:
            - /penguin/豊田築炉/2-工事/2025-0618 豊田築炉 名和工場/工事.xlsx
          type: string
        isDirectory:
          examples:
            - true
          type: boolean
        modifiedTime:
          examples:
            - "2025-06-18T12:00:00Z"
          type: string
        size:
          examples:
            - 4096
          format: int64
          type: integer
        standardPath:
          examples:
            - /penguin/豊田築炉/2-工事/2025-0618 豊田築炉 名和工場.xlsx
          type: string
      required:
        - actualPath
        - standardPath
        - isDirectory
        - size
        - modifiedTime
      type: object
    Get-rootResponse:
      additionalProperties: false
      properties:
        $schema:
          description: A URL to the JSON Schema for this object.
          examples:
            - http://localhost:8080/api/schemas/Get-rootResponse.json
          format: uri
          readOnly: true
          type: string
        docs:
          examples:
            - /docs
          type: string
        message:
          examples:
            - Penguin Backend API
          type: string
        version:
          examples:
            - 1.0.0
          type: string
      required:
        - message
        - version
        - docs
      type: object
info:
  description: ファイルエントリの管理と閲覧のためのAPI
  title: Penguin ファイル情報管理API
  version: 1.0.0
openapi: 3.1.0
paths:
  /:
    get:
      description: API のバージョンやドキュメントURLを返します
      operationId: get-root
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Get-rootResponse"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: API ルート情報取得
      tags:
        - system
  /companies:
    get:
      description: 会社フォルダーの一覧を取得します
      operationId: list-companies
      responses:
        "200":
          content:
            application/json:
              schema:
                description: 会社一覧
                items:
                  $ref: "#/components/schemas/Company"
                type:
                  - array
                  - "null"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: 会社一覧の取得
      tags:
        - 会社管理
    put:
      description: 会社情報を更新し、必要に応じてフォルダー名を変更します
      operationId: update-company
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Company"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Company"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: 会社情報の更新
      tags:
        - 会社管理
  /companies/categories:
    get:
      description: カテゴリー一覧を取得します
      operationId: list-company-categories
      responses:
        "200":
          content:
            application/json:
              schema:
                description: カテゴリー一覧
                items:
                  $ref: "#/components/schemas/CompanyCategoryInfo"
                type:
                  - array
                  - "null"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: カテゴリー一覧の取得
      tags:
        - 会社管理
  /companies/{id}:
    get:
      description: 指定されたIDの会社詳細を取得します
      operationId: get-company
      parameters:
        - description: 会社ID
          example: toyota
          in: path
          name: id
          required: true
          schema:
            description: 会社ID
            examples:
              - toyota
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Company"
                description: 会社詳細
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: 会社詳細の取得
      tags:
        - 会社管理
servers:
  - url: http://localhost:8080/api
  - url: https://localhost:8443/api
